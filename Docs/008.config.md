# ConfigNode

The config node system is used for adddon configurations, it's designed on the saved variables, but will take care all the details. Please don't use it with SVMananger(you still can use it, but not recommend).

## A simple start

Here is an example addon to show use it, a simple addons have one saved variables:

```toc
## Interface: 90200
## Interface-Retail: 90200
## Interface-Classic: 11402
## Interface-BCC: 20503
## Dependencies: Scorpio
## SavedVariables: TestAddonSave

# Core
TestAddon.lua
```

A simple addon to show the config system:

```lua
Scorpio "TestAddon" ""

function OnLoad()
	-- Binding the _Config with the saved variables
	_Config:SetSavedVariable("TestAddonSave")
end

-- Declare a field "log" to the _Config with default value 3
-- the function will be called when player entering the game
-- or the field value changed
__Config__(_Config, "log", 3)
function SetLogLevel(lvl)
	print("[Config]Log Level is", lvl)
end

--- Declare a slash command to change the log level of the addon
__SlashCmd__ "test" "log"
function OnSlashCmdLogLevel(lvl)
	-- Call the SetLogLevel to change the level
    SetLogLevel(floor(lvl))
end
```

So, with the addon:

1. Entering the game, it'll print the `[Config]Log Level is 3`.
2. Then use `/test log 1`, it'll print `[Config]Log Level is 1`.
3. Reload the game, it'll print `[Config]Log Level is 1`, so the field data is saved and can be reloaded.


The main purpose of the config node system is to split the saved variable definitions to where it's used, and just keep using the pure function code style to simple the codes.

We use `3` as the default value of the `log` field, so the field will be declared to accept number value only. The field value type not only should be simple value, also enum, array, dictionary and other complex structure data types can be used. Based on the types, the system can choose the matched UI widget to show or modify the field value when the **auto-gen config panel** is used.


## Config Node and Sub-Node



## Global, Char, Spec, WarMode Config Node